<div>
  <ul class="nav navbar-nav navbar-right">
    <li style="position: relative;"><a id="notification" data-url='<%= notifications_path %>'><%= image_tag("logo_notice.png") %>
      <span class="badge" style="position: absolute; top: 5px; right: 3px; border-radius: 50%; cursor: pointer;">2</span></a>
    </li>
    <li><%= link_to "#{current_user.name} #{current_user.id}", users_path %></li>
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">
        <%= t("user.account") %> <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        <li><%= link_to t("user.profile"), current_user %></li>
        <li><%= link_to t("user.settings"), edit_user_registration_path %></li>
        <li class="divider"></li>
        <li>
          <%= link_to t("user.logout"), destroy_user_session_path, method: :delete %>
        </li>
      </ul>
    </li>
  </ul>
</div>


<div class="container">
  <div class="row">
    <div class="col-md-8"></div>
    <div class="col-md-3 list-notice" id="list-notice" style="display: none;">
      <%= render current_user.notifications.order(id: :desc) %>
    </div>
  </div>
</div>

<script type="text/javascript">
  jQuery(document).ready(function($){
    $(window).click(function() {
      $('#list-notice').hide();
    });

    $('#notification').click(function (e) {
      // var url = 'http://localhost:3000' + $(this).data('url');
      // $.get(url, {
     //        authenticity_token: $('meta[name="csrf-token"]').attr('content')
     //    }).done(function(data){
     //        console.log(data);
     //        // $('body').html(data);
     //    });
      if (!$('#list-notice').is(':visible'))
      {
        e.stopPropagation();
        $('#list-notice').show();
      }
      // evt.preventDefault();
      // var a = $(this);
      // console.log(a);
      // var url = $(this).data('url');
      // $.ajax({
     //        url: url,
     //        headers: {
     //            'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content') ,
     //            'Accept': "application/json"
     //        },
     //        type: 'POST',
     //        success: function(status) {
     //            if (status == 'done') {
     //             $('#read-notification .badge').remove();
     //            }
     //        }
     //    });
    });
}); 
</script>